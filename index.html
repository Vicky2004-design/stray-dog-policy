<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>台灣遊蕩犬管理政策流程圖</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <style>
    /* ── Reset & Base ── */
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    :root {
      --bg: #fafafa;
      --card: #ffffff;
      --primary: #1a1a1a;
      --secondary: #666666;
      --muted: #999999;
      --border: #e0e0e0;
      --shadow: 0 2px 12px rgba(0,0,0,0.08);
      --radius: 12px;
      --accent-red: #d32f2f;
      --accent-green: #388e3c;
      --accent-purple: #6a1b9a;
      --accent-blue: #1565c0;
    }
    
    /* ── Dark Mode ── */
    body.dark-mode {
      --bg: #0f0f0f;
      --card: #1a1a1a;
      --primary: #f5f5f5;
      --secondary: #b0b0b0;
      --muted: #808080;
      --border: #333333;
      --shadow: 0 2px 12px rgba(0,0,0,0.3);
    }
    
    body {
      font-family: 'Noto Sans TC', 'Segoe UI', sans-serif;
      background: var(--bg);
      color: var(--primary);
      min-height: 100vh;
      font-weight: 400;
      transition: background 0.3s ease, color 0.3s ease;
    }

    /* ── Header ── */
    header {
      background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 100%);
      color: #fff;
      padding: 56px 24px 48px;
      text-align: center;
      position: relative;
    }
    
    .header-controls {
      position: absolute;
      top: 20px;
      right: 20px;
      display: flex;
      gap: 12px;
    }
    
    .theme-toggle, .share-btn {
      background: rgba(255,255,255,0.15);
      border: 1px solid rgba(255,255,255,0.25);
      color: #fff;
      padding: 8px 12px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 0.9rem;
      transition: all 0.24s ease;
      font-family: 'Noto Sans TC', sans-serif;
    }
    
    .theme-toggle:hover, .share-btn:hover {
      background: rgba(255,255,255,0.25);
      transform: translateY(-2px);
    }
    
    header .badge {
      display: inline-block;
      background: rgba(255,255,255,0.12);
      border: 1px solid rgba(255,255,255,0.25);
      border-radius: 999px;
      padding: 6px 18px;
      font-size: 0.75rem;
      letter-spacing: 0.08em;
      margin-bottom: 16px;
      font-weight: 600;
    }
    header h1 {
      font-size: clamp(1.8rem, 5vw, 2.8rem);
      font-weight: 700;
      line-height: 1.3;
      margin-bottom: 12px;
      letter-spacing: -0.02em;
    }
    header p {
      font-size: 1rem;
      opacity: 0.85;
      max-width: 580px;
      margin: 0 auto;
      line-height: 1.6;
      font-weight: 400;
    }

    /* ── Nav Tabs ── */
    .tab-bar {
      display: flex;
      justify-content: center;
      gap: 10px;
      padding: 32px 16px 0;
      flex-wrap: wrap;
      background: var(--bg);
      align-items: center;
      overflow-x: auto;
      position: relative;
    }
    
    .tab-bar .return-btn {
      position: absolute;
      right: 20px;
      top: 32px;
    }
    
    @media (max-width: 768px) {
      .tab-bar .return-btn {
        position: static;
        margin-top: 10px;
        width: 100%;
      }
    }
    
    .tab-btn {
      padding: 11px 26px;
      border-radius: 999px;
      border: 1.5px solid var(--border);
      background: var(--card);
      color: var(--secondary);
      font-size: 0.9rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.24s ease;
      font-family: 'Noto Sans TC', sans-serif;
      white-space: nowrap;
    }
    .tab-btn:hover {
      border-color: var(--primary);
      color: var(--primary);
      background: var(--bg);
    }
    .tab-btn.active {
      background: var(--primary);
      border-color: var(--primary);
      color: #fff;
      box-shadow: var(--shadow);
    }

    /* ── Main Content ── */
    main {
      max-width: 900px;
      margin: 0 auto;
      padding: 40px 20px;
    }
    
    .tab-panel {
      display: none;
      animation: fadeIn 0.3s ease;
    }
    .tab-panel.active {
      display: block;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* ── Cards ── */
    .card {
      background: var(--card);
      border-radius: var(--radius);
      padding: 28px;
      margin-bottom: 24px;
      box-shadow: var(--shadow);
      border: 1px solid var(--border);
      transition: all 0.24s ease;
    }
    .card:hover {
      box-shadow: 0 4px 20px rgba(0,0,0,0.12);
      transform: translateY(-2px);
    }
    .card-title {
      font-size: 1.3rem;
      font-weight: 700;
      margin-bottom: 8px;
      color: var(--primary);
    }
    .card-sub {
      font-size: 0.85rem;
      color: var(--muted);
      margin-bottom: 20px;
      font-weight: 500;
    }

    /* ── List Items ── */
    .list-item {
      display: flex;
      align-items: flex-start;
      gap: 16px;
      padding: 18px 0;
      border-bottom: 1px solid var(--border);
    }
    .list-item:last-child { border-bottom: none; }
    .icon-box {
      width: 42px;
      height: 42px;
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
      font-size: 1.2rem;
    }
    .item-content h4 {
      font-size: 1.05rem;
      font-weight: 700;
      margin-bottom: 4px;
    }
    .item-content p {
      font-size: 0.9rem;
      color: var(--secondary);
      line-height: 1.6;
    }

    /* ── Comparison Table ── */
    .table-container {
      overflow-x: auto;
      border-radius: 8px;
      border: 1px solid var(--border);
    }
    table {
      width: 100%;
      border-collapse: collapse;
      background: var(--card);
      font-size: 0.9rem;
    }
    th, td {
      padding: 14px 16px;
      text-align: left;
      border-bottom: 1px solid var(--border);
    }
    th {
      background: rgba(0,0,0,0.03);
      font-weight: 700;
      color: var(--primary);
    }
    body.dark-mode th { background: rgba(255,255,255,0.05); }

    /* ── Diagram Styles ── */
    .diagram-wrap {
      text-align: center;
      margin-top: 10px;
    }
    .diagram-wrap img {
      max-width: 100%;
      border-radius: 8px;
      cursor: zoom-in;
      transition: transform 0.3s ease;
    }
    .diagram-hint {
      margin-top: 12px;
      font-size: 0.8rem;
      color: var(--muted);
      font-style: italic;
    }

    /* ── Accordion ── */
    .accordion-item {
      border-bottom: 1px solid var(--border);
    }
    .accordion-header {
      padding: 18px 0;
      cursor: pointer;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .accordion-header h4 { font-weight: 700; font-size: 1.05rem; }
    .accordion-content {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.3s ease-out;
      color: var(--secondary);
      font-size: 0.9rem;
      line-height: 1.7;
    }
    .accordion-content p { padding-bottom: 18px; }
    .chevron { transition: transform 0.3s ease; color: var(--muted); }
    .rotated { transform: rotate(180deg); }

    /* ── Responsive ── */
    @media (max-width: 600px) {
      header { padding: 40px 20px; }
      main { padding: 24px 16px; }
      .tab-bar { gap: 6px; padding: 20px 12px 0; }
      .tab-btn { padding: 8px 18px; font-size: 0.85rem; }
    }
  </style>
</head>
<body>

<header>
  <div class="header-controls">
    <button class="share-btn" onclick="sharePage()"><i class="fas fa-share-alt"></i> 分享</button>
    <button class="theme-toggle" onclick="toggleTheme()" id="theme-btn"><i class="fas fa-moon"></i></button>
  </div>
  <div class="badge">TAIWAN STRAY DOG POLICY</div>
  <h1>遊蕩犬管理政策流程</h1>
  <p>從源頭減量到末端收容，全面解析台灣流浪犬管理的法律架構與執行現況。</p>
</header>

<div class="tab-bar">
  <button class="tab-btn active" onclick="switchTab('overview')"><i class="fas fa-chart-bar"></i> 政策概覽</button>
  <button class="tab-btn" onclick="switchTab('before')"><i class="fas fa-times-circle"></i> 零撲殺前</button>
  <button class="tab-btn" onclick="switchTab('after')"><i class="fas fa-check-circle"></i> 零撲殺後</button>
  <button class="tab-btn" onclick="switchTab('tnvr')"><i class="fas fa-paw"></i> TNVR 詳解</button>
  <button class="tab-btn" onclick="switchTab('diagram')"><i class="fas fa-sitemap"></i> 完整流程圖</button>
  <button class="tab-btn" onclick="location.href='comparison_interactive.html'" style="background: linear-gradient(135deg, #6a1b9a 0%, #8e24aa 100%); color: #fff; border-color: #6a1b9a;" title="互動式國際政策對比"><i class="fas fa-globe"></i> 互動對比</button>
  <button class="tab-btn" onclick="location.href='flow_paths.html'" style="background: linear-gradient(135deg, #d32f2f 0%, #e53935 100%); color: #fff; border-color: #d32f2f;" title="收容與分流管理機制"><i class="fas fa-code-branch"></i> 收容分流</button>
  <button class="tab-btn return-btn" style="background: linear-gradient(135deg, #1a1a1a 0%, #333 100%); color: #fff; border-color: #1a1a1a; text-decoration: none; display: inline-flex; align-items: center; justify-content: center; transition: all 0.24s ease; cursor: pointer;" onmouseover="this.style.background='linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 100%)'; this.style.transform='translateY(-2px)';" onmouseout="this.style.background='linear-gradient(135deg, #1a1a1a 0%, #333 100%)'; this.style.transform='translateY(0)';" onclick="history.back();" title="返回上一頁"><i class="fas fa-arrow-left"></i> 返回</button>
</div>

<main>

  <!-- TAB 1: 政策概覽 -->
  <div id="tab-overview" class="tab-panel active">
    <div class="card">
      <div class="card-title"><i class="fas fa-chart-bar"></i> 政策概覽</div>
      <div class="card-sub">台灣流浪犬管理政策的演進與核心目標</div>
      <p style="font-size:0.95rem; line-height:1.7; color:var(--secondary); margin-bottom:20px;">
        自 2017 年正式實施「零撲殺」政策以來，台灣遊蕩犬管理從傳統的「末端捕捉與移除」，轉向更強調「源頭減量」與「社區共存」的多元治理模式。本網站旨在提供一個清晰、客觀的資訊平台，協助公眾理解複雜的政策邏輯與實務運作。
      </p>
      <div class="table-container">
        <table>
          <thead>
            <tr>
              <th>階段</th>
              <th>核心機制</th>
              <th>主要特點</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><strong>2017 以前</strong></td>
              <td>末端移除</td>
              <td>收容所滿載時進行人道處理（撲殺）</td>
            </tr>
            <tr>
              <td><strong>2017 至今</strong></td>
              <td>零撲殺時代</td>
              <td>禁止人道處理，推行 TNVR 與精準捕捉</td>
            </tr>
            <tr>
              <td><strong>未來趨勢</strong></td>
              <td>源頭治理</td>
              <td>強化飼主責任、落實晶片登記與家犬絕育</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- TAB 2: 零撲殺前 -->
  <div id="tab-before" class="tab-panel">
    <div class="card">
      <div class="card-title"><i class="fas fa-times-circle"></i> 零撲殺前：末端移除機制</div>
      <div class="card-sub">過去以收容所容量為核心的管理邏輯</div>
      
      <div class="list-item">
        <div class="icon-box" style="background:rgba(211,47,47,0.1); color:var(--accent-red);"><i class="fas fa-search"></i></div>
        <div class="item-content">
          <h4>無差別捕捉</h4>
          <p>只要接獲民眾通報或巡查發現，清潔隊或捕犬員即前往捕捉並送往收容所。</p>
        </div>
      </div>
      
      <div class="list-item">
        <div class="icon-box" style="background:rgba(211,47,47,0.1); color:var(--accent-red);"><i class="fas fa-hourglass-half"></i></div>
        <div class="item-content">
          <h4>公告與等待</h4>
          <p>進入收容所後公告 12 天，等待原飼主領回或新飼主領養。</p>
        </div>
      </div>
      
      <div class="list-item">
        <div class="icon-box" style="background:rgba(211,47,47,0.1); color:var(--accent-red);"><i class="fas fa-skull"></i></div>
        <div class="item-content">
          <h4>人道處理（撲殺）</h4>
          <p>若逾期未被領養且收容空間不足，則依規定進行安樂死，造成收容所極大壓力。</p>
        </div>
      </div>
    </div>
  </div>

  <!-- TAB 3: 零撲殺後 -->
  <div id="tab-after" class="tab-panel">
    <div class="card">
      <div class="card-title"><i class="fas fa-check-circle"></i> 零撲殺後：精準管理機制</div>
      <div class="card-sub">2017 年後轉向行為評估與分流管理</div>
      
      <div class="list-item">
        <div class="icon-box" style="background:rgba(56,142,60,0.1); color:var(--accent-green);"><i class="fas fa-balance-scale"></i></div>
        <div class="item-content">
          <h4>行為風險評估</h4>
          <p>捕捉後由專業人員評估犬隻是否具有攻擊性、追車等危險行為。</p>
        </div>
      </div>
      
      <div class="list-item">
        <div class="icon-box" style="background:rgba(56,142,60,0.1); color:var(--accent-green);"><i class="fas fa-code-branch"></i></div>
        <div class="item-content">
          <h4>精準捕捉與分流</h4>
          <p><strong>高風險犬隻：</strong>送往收容所長期安置，不回置環境。<br><strong>一般犬隻：</strong>進入 TNVR 程序，結紮後回置原處。</p>
        </div>
      </div>
      
      <div class="list-item">
        <div class="icon-box" style="background:rgba(56,142,60,0.1); color:var(--accent-green);"><i class="fas fa-infinity"></i></div>
        <div class="item-content">
          <h4>零撲殺挑戰</h4>
          <p>禁止撲殺後，收容所面臨長期爆滿壓力，需透過提高認養率與源頭絕育來緩解。</p>
        </div>
      </div>
    </div>
  </div>

  <!-- TAB 4: TNVR 詳解 -->
  <div id="tab-tnvr" class="tab-panel">
    <div class="card">
      <div class="card-title"><i class="fas fa-paw"></i> TNVR 流程詳解</div>
      <div class="card-sub">控制遊蕩犬族群數量的核心手段</div>
      
      <div class="accordion-item">
        <div class="accordion-header" onclick="toggleAccordion(0)">
          <h4><span style="color:var(--accent-purple);">T</span> - Trap 誘捕</h4>
          <i class="fas fa-chevron-down chevron"></i>
        </div>
        <div class="accordion-content">
          <p>使用專業誘捕籠或吹箭等方式，在不傷害犬隻的前提下將其捕捉，通常由專業團隊或合作志工執行。</p>
        </div>
      </div>
      
      <div class="accordion-item">
        <div class="accordion-header" onclick="toggleAccordion(1)">
          <h4><span style="color:var(--accent-purple);">N</span> - Neuter 結紮</h4>
          <i class="fas fa-chevron-down chevron"></i>
        </div>
        <div class="accordion-content">
          <p>由獸醫師進行絕育手術，並進行剪耳標記（男左女右），以利遠端辨識是否已絕育，避免重複捕捉。</p>
        </div>
      </div>
      
      <div class="accordion-item">
        <div class="accordion-header" onclick="toggleAccordion(2)">
          <h4><span style="color:var(--accent-purple);">V</span> - Vaccinate 疫苗</h4>
          <i class="fas fa-chevron-down chevron"></i>
        </div>
        <div class="accordion-content">
          <p>施打狂犬病疫苗及其他核心疫苗，提升犬隻群體免疫力，降低公共衛生風險。</p>
        </div>
      </div>
      
      <div class="accordion-item">
        <div class="accordion-header" onclick="toggleAccordion(3)">
          <h4><span style="color:var(--accent-purple);">R</span> - Return 回置</h4>
          <i class="fas fa-chevron-down chevron"></i>
        </div>
        <div class="accordion-content">
          <p>將健康且無攻擊性的犬隻送回原捕捉地點，利用其領域性防止外部未結紮犬隻遷入，達成區域族群穩定。</p>
        </div>
      </div>
    </div>
  </div>

  <!-- TAB 5: 完整流程圖 -->
  <div id="tab-diagram" class="tab-panel">
    <div class="card">
      <div class="card-title"><i class="fas fa-sitemap"></i> 完整政策流程圖</div>
      <div class="card-sub">零撲殺前後完整決策流程一覽（可點擊放大）</div>
      <div class="diagram-wrap">
        <div style="overflow-x: auto; padding: 20px 0; background: var(--card); border-radius: var(--radius); border: 1px solid var(--border);">
          <img src="flowchart_horizontal.png" alt="完整政策流程圖" style="min-width: 1200px; height: auto; cursor: zoom-in;" onclick="this.style.minWidth=this.style.minWidth=='1200px'?'1800px':'1200px';this.style.cursor=this.style.cursor=='zoom-out'?'zoom-in':'zoom-out'" title="點擊放大" />
        </div>
        <div class="diagram-hint"><i class="fas fa-mouse"></i> 橫向捲動以查看完整流程 | 點擊圖片可放大檢視</div>
      </div>
    </div>

    <div class="card">
      <div class="card-title"><i class="fas fa-image"></i> 靜態流程圖（可下載）</div>
      <div class="card-sub">高解析度流程圖，適合列印或簡報使用</div>
      <img src="flowchart_horizontal.png" alt="遊蕩犬管理政策流程圖" style="width:100%; display:block; margin:20px auto; border-radius:10px; border:1px solid var(--border);" />
      <div style="text-align:center;margin-top:20px;">
        <button onclick="downloadFlowchart()" style="background:linear-gradient(135deg, #1a1a1a 0%, #333 100%);color:#fff;border:none;padding:12px 28px;border-radius:999px;cursor:pointer;font-weight:600;display:inline-flex;align-items:center;gap:8px;transition:all 0.24s ease;" onmouseover="this.style.background='linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 100%)';this.style.transform='translateY(-2px)';" onmouseout="this.style.background='linear-gradient(135deg, #1a1a1a 0%, #333 100%)';this.style.transform='translateY(0)';">
          <i class="fas fa-download"></i> 下載 PNG
        </button>
      </div>
    </div>
  </div>

</main>

<script>
  // ── 標籤切換 ──
  function switchTab(tabId) {
    document.querySelectorAll('.tab-panel').forEach(panel => panel.classList.remove('active'));
    document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
    
    document.getElementById('tab-' + tabId).classList.add('active');
    event.currentTarget.classList.add('active');
    
    window.scrollTo({ top: 0, behavior: 'smooth' });
  }

  // ── 深色模式 ──
  function toggleTheme() {
    const isDark = document.body.classList.toggle('dark-mode');
    localStorage.setItem('theme', isDark ? 'dark' : 'light');
    const btn = document.getElementById('theme-btn');
    btn.innerHTML = isDark ? '<i class="fas fa-sun"></i>' : '<i class="fas fa-moon"></i>';
  }

  // 載入儲存的主題
  if (localStorage.getItem('theme') === 'dark') {
    document.body.classList.add('dark-mode');
    document.getElementById('theme-btn').innerHTML = '<i class="fas fa-sun"></i>';
  }

  // ── 分享功能 ──
  function sharePage() {
    if (navigator.share) {
      navigator.share({
        title: '台灣遊蕩犬管理政策流程',
        url: window.location.href
      });
    } else {
      alert('請複製網址分享：' + window.location.href);
    }
  }

  // ── 摺疊選單 ──
  function toggleAccordion(index) {
    const contents = document.querySelectorAll('.accordion-content');
    const chevrons = document.querySelectorAll('.chevron');
    
    const content = contents[index];
    const icon = chevrons[index];
    
    if (content.style.maxHeight) {
      content.style.maxHeight = null;
      icon.classList.remove('rotated');
    } else {
      content.style.maxHeight = content.scrollHeight + "px";
      icon.classList.add('rotated');
    }
  }

  // ── 下載函數 ──
  function downloadFlowchart() {
    const link = document.createElement('a');
    link.href = 'flowchart_horizontal.png';
    link.download = 'stray_dog_policy_flowchart_horizontal.png';
    document.body.appendChild(link);
    link.click();
    document.body.removeChild(link);
  }
</script>

</body>
</html>
